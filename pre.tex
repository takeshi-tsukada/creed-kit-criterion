\section{Preliminaries}

\subsection{Presheaves and Profunctors}

\newcommand{\Object}{\mathit{obj}}
\newcommand{\Skeleton}{\mathit{sk}}

A \emph{groupoid} \( \Grp \) is a category in which every morphism is invertible.
In particular, the set \( \Grp(a,a) \) of endo-morphisms is a group for every object \( a \in \Grp \).
A groupoid can be seen as a set in which each element is equipped with a group: a groupoid \( \Grp \) is equivalent to its skeleton \( \Skeleton(\Grp) \), which is a set \( \Object(\Skeleton(\Grp)) \) equipped with a group \( \Skeleton(\Grp)(a, a) \) for each \( a \in \Object(\Skeleton(\Grp)) \).

A \emph{(contravariant) presheaf} on a groupoid \( \Grp \) is a functor \( \Grp^{\op} \longrightarrow \Set \).
\tk{to do: the notation of the action}

For groupoids \( \Grp \) and \( \Grpb \), a \emph{profunctor} \( F \colon \Grp \profarrow \Grpb \) is a functor \( F \colon \Grp^{\op} \times \Grpb \longrightarrow \Set \).
The definition works for general categories \( \Grp \) and \( \Grpb \), but this paper focus on profunctors between groupoids.
\tk{to do: the notation of the action}

\tk{to do: describe the category of profunctors (note: identification of profunctors by iso.).  Describe its compact closed structure and \( ! \)}

\subsection{Presheaves and Profunctors as Sums of Subgroups}
Presheaves and profunctors on groupoids have an useful decomposition.
Let \( \Grp \) be a groupoid, \( a \in \Grp \), and \( G \) be a subgroup of \( \Grp(a,a) \).
We write \( \InducedProf{G} \) for the presheaf defined by:
\begin{align*}
    \InducedProf{G}(a')
    &\quad\defeq\quad
    \{ G \cdot f \mid f \in \Grp(a', a) \}
    \\
    \InducedProf{G}(f)
    &\quad\defeq\quad
    X \mapsto (X \cdot f)
\end{align*}
where for \( X \subseteq \Grp(a', a) \) and \( f \in \Grp(a'', a') \), \( G \cdot f \) is the subset of \( \Grp(a'', a) \) defined by \( (X \cdot f) \defeq \{ x \circ f \mid x \in X \} \).

\begin{proposition}
    The stabiliser groups of \( \InducedProf{G} \) are conjugacies of \( G \).
    %
    \qed
\end{proposition}

\newcommand{\Stabiliser}{\mathsf{fix}}

Let \( F \) be a presheaf on \( \Grp \).
We introduce an equivalence relation \( \sim \) on \( \coprod_a F(a) \defeq \{ (a, x) \mid x \in F(a) \} \) by
\begin{equation*}
    (a, x) \sim (a', x')
    \quad\defiff\quad
    \exists f \in \Grp(a', a).\: x \cdot f = x'.
\end{equation*}
Let \( \mathcal{R} \) be a set of representatives of the equivalence classes of \( \sim \).
For \( (a, x) \in \mathcal{R} \), let \( \Stabiliser(x) \in \Subgroup(\Grp(a,a)) \) be the stabilisers of \( x \), i.e.~\( \Stabiliser(x) \defeq \{ f \in \Grp(a,a) \mid x \cdot f = x \} \).

\begin{proposition}
    \( F \cong \coprod_{(a,x) \in \mathcal{R}} \InducedProf{\Stabiliser(x)} \).
\end{proposition}
\begin{proof}
    We give natural transformations \( \eta \colon F \Rightarrow \coprod_{(a,x) \in X} \InducedProf{G_x} \) and \( \mu \colon \coprod_{(a,x) \in X} \InducedProf{G_x} \Rightarrow F \) as follows.

    Given \( y \in F(b) \), there exist \( (a,x) \in X \) and \( f \in \Grp(b,a) \) such that \( y = x \cdot f \).
    Then we define \( \mu_b(y) \defeq G_x \cdot f \in \InducedProf{G_x} \subseteq \coprod_{(a,x) \in X} \InducedProf{G_x} \).
    This operation is well-defined: the choice of \( (a,x) \in X \) is unique and, if \( g \in \Grp(b,a) \) also satisfies \( y = x \cdot f \), then \( x = x \cdot f \cdot g^{-1} \), so \( f \circ g^{-1} \in G_x \) and \( G_x \cdot f = G_x \cdot g \).
    The naturality is obvious.

    Given \( (a,x) \in X \) and \( X \in \InducedProf{G_x}(b) \), we have \( X = G_x \cdot f \) for some \( f \in \Grp(b,a) \).
    Then \( \mu_b(X) \defeq x \cdot f \).
    The well-definedness and naturality is trivial.

    It is easy to see that \( \mu \circ \eta = \ident \) and \( \eta \circ \mu = \ident \).
\end{proof}
\begin{corollary}
    Every presheaf \( F \in \mathit{psh}(\Grp) \) is isomorphic to a coproduct \( \coprod_{i \in I} \InducedProf{G_i} \) of profunctors induced by subgroups \( G_i \subseteq \Grp(a_i, a_i) \).
\end{corollary}

A similar argument applies to profunctors.
A subgroup \( G \) of \( \Grp^\op(a,a) \times \Grpb(b,b) \) induces a profunctor \( \InducedProf{G} \colon \Grp \profarrow \Grpb \) by 
\begin{align*}
    \InducedProf{G}(a', b')
    &\quad\defeq\quad
    \{ g \cdot G \cdot f \mid f \in \Grp(a', a), g \in \Grpb(b, b') \}
    \\
    \InducedProf{G}(f, g)
    &\quad\defeq\quad
    X \mapsto (g \cdot X \cdot f),
\end{align*}
where \( (g \cdot X \cdot f) \defeq \{ g \circ x \circ f \mid x \in X \} \).
A profunctor \( F \colon \Grp \profarrow \Grpb \) induces an equivalence relation \( \sim \) on \( \coprod_{a,b} F(a,b) \defeq \{ (a, x, b) \mid x \in F(a, b) \} \) given by
\( (a, x, b) \sim (a', x', b') \) if and only if \( g \cdot x \cdot f = x' \) for some \( f \in \Grp(a', a) \) and \( g \in \Grpb(b, b') \).
Let \( \mathcal{R} \) be a set of representatives of the equivalence classes of \( \sim \).
For \( (a, x) \in X \), let \( \Stabiliser(x) \in \Subgroup(\Grp^\op(a,a) \times \Grpb(b,b)) \) be the stabilisers of \( x \), i.e.~\( \Stabiliser(x) \defeq \{ (f,g) \in \Grp^{\op}(a,a) \times \Grpb(b,b) \mid g \cdot x \cdot f = x \} \).

\begin{proposition}
    \( F \cong \coprod_{(a,x,b) \in \mathcal{R}} \InducedProf{\Stabiliser(x)} \).
    For \( F \colon \Grp \profarrow \Grpb \) and \( G \colon \Grpb \profarrow \Grpc \) with \( F \cong \coprod_i \InducedProf{F_i} \) and \( G \cong \coprod_j \InducedProf{G_j} \), we have \( G \circ F \cong \coprod_{i,j} (\InducedProf{G_j} \circ \InducedProf{F_i}) \).
    %
    \qed
\end{proposition}


